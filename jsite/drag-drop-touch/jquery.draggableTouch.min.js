!function(e){e.fn.draggableTouch=function(a){if(void 0===window.ontouchstart)return this.draggableMouse(a);if("string"==typeof a){if("disable"==a)return this.unbind("touchstart.draggableTouch"),this.unbind("touchmove.draggableTouch"),this.unbind("touchend.draggableTouch"),this.unbind("touchcancel.draggableTouch"),this.trigger("dragdisabled"),this}else var n=a&&a.useTransform;return this.each(function(){var a=e(this),t=null,o=null,g=function(e){e.preventDefault();for(var n=e.originalEvent,g=0;g<n.changedTouches.length;g++){var r=n.changedTouches[g];r.identifier==o&&(a.trigger("dragend",{top:n.changedTouches[0].pageY-t.y,left:n.changedTouches[0].pageX-t.x}),o=null)}};a.bind("touchstart.draggableTouch",function(n){var g=n.originalEvent;if(!o){o=g.changedTouches[0].identifier;var r=e(this).position();t={x:g.changedTouches[0].pageX-r.left,y:g.changedTouches[0].pageY-r.top},a.trigger("dragstart",r)}}),a.bind("touchmove.draggableTouch",function(a){a.preventDefault();for(var g=a.originalEvent,r=0;r<g.changedTouches.length;r++){var u=g.changedTouches[r];u.identifier==o&&(n?e(this).css({transform:"translate3d("+(u.pageX-t.x)+"px, "+(u.pageY-t.y)+"px, 0px)"}):e(this).css({top:u.pageY-t.y,left:u.pageX-t.x}))}}),a.bind("touchend.draggableTouch touchcancel.draggableTouch",g)}),this},e.fn.draggableMouse=function(a){if("string"==typeof a){if("disable"==a)return this.unbind("mousedown.draggableTouch"),this.unbind("mouseup.draggableTouch"),e(document).unbind("mousemove.draggableTouch"),this.trigger("dragdisabled"),this}else var n=a&&a.useTransform;return this.each(function(){var a=e(this),t=null,o=function(e){n?a.css({transform:"translate3d("+(e.pageX-t.x)+"px, "+(e.pageY-t.y)+"px, 0px)"}):a.css({top:e.pageY-t.y,left:e.pageX-t.x})},g=function(n){a.unbind("mouseup.draggableTouch",g),e(document).unbind("mousemove.draggableTouch",o),a.trigger("dragend",{top:n.pageY-t.y,left:n.pageX-t.x})};a.bind("mousedown.draggableTouch",function(n){var r=a.position();t={x:n.pageX-r.left,y:n.pageY-r.top},e(document).bind("mousemove.draggableTouch",o),a.bind("mouseup.draggableTouch",g),a.trigger("dragstart",r),n.preventDefault()})}),this}}(jQuery);