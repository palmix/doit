!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Sketchfab=e():t.Sketchfab=e()}(self,()=>(()=>{"use strict";var n={d:(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},t={};function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}n.d(t,{default:()=>i});function s(t,s){t.forEach(function(n){this[n]=function(){var t,e=s._requestIdCounter++,i=Array.prototype.slice.call(arguments);0<i.length&&"function"==typeof i[i.length-1]&&(t=i.pop()),t&&(s._pendingRequests[e]=t.bind(this)),s._target.postMessage({type:"api.request",instanceId:s.getIdentifier(),requestId:e,member:n,arguments:i},s.getDomain())}},this),this.addEventListener=function(t,e,i){"viewerready"===t&&s.isViewerReady&&e(),s._eventListeners[t]||(s._eventListeners[t]=[]),s._eventListeners[t].push(e),i&&this.setListenerOptions&&(i.name=t,this.setListenerOptions(i))},this.removeEventListener=function(t,e){!s._eventListeners[t]||-1!==(e=s._eventListeners[t].indexOf(e))&&s._eventListeners[t].splice(e,1)}}var e=function(t,e,i){this._target=t,this._requestIdCounter=0,this._pendingRequests={},this._eventListeners={},this._ready=!1,this._domain=i,this._instanceId=e,this.listenServer()};e.prototype={getIdentifier:function(){return this._instanceId},getDomain:function(){return this._domain},setIdentifier:function(t){this._instanceId=t},use:function(t,n){this._version=t,this._ready=!0;var e=this._requestIdCounter++;this._pendingRequests[e]=function(t,e,i){t?n.call(this,t):n.call(this,null,new s(i,this))}.bind(this),this._target.postMessage({type:"api.initialize",requestId:e,name:t,instanceId:this._instanceId},this._domain)},listenServer:function(){var r;this._serverReceiveMessageBinded||(r=["api.initialize.result","api.request.result","api.event"],this._serverReceiveMessageBinded=function(t){var e,i,n,s,o;t.origin===this._domain&&t.data&&t.data.type&&t.data.instanceId&&t.data.instanceId===this.getIdentifier()&&(e=t.data.type,-1!==r.indexOf(e)&&("api.event"===e?(o=(i=t.data.results)[0],this._eventListeners["*"]||this._eventListeners.all?["*","all"].forEach(function(t){t=this._eventListeners[t];t&&t.forEach(function(t){t.apply(t,i)})},this):(n=i.slice(1),(s=this._eventListeners[o])?s.forEach(function(t){t.apply(t,n)}):"viewerready"===o&&(this.isViewerReady=!0))):(s=t.data.requestId,(o=this._pendingRequests[s])&&(o.apply(null,t.data.results),this._pendingRequests[s]=void 0))))}.bind(this),window.addEventListener("message",this._serverReceiveMessageBinded))}};var r=/[&|;]+/g;window.SketchfabAPIClient=e;e=function(t,e){var i=t,e=e;"object"===o(t)&&(e=t,i=null),this._version=i,this._target=e,window.sketchfabAPIinstances||(window.sketchfabAPIinstances=[]),window.sketchfabAPIinstances.push(this),this._apiId=window.sketchfabAPIinstances.length.toString(),this._target.id&&(this._apiId+="_"+this._target.id),this._target.allow||(this._target.allow="autoplay; fullscreen"),this._client=void 0,this._options=void 0,this._domain="sketchfab.com",this._domain="same-as-current"===this._domain?window.location.hostname:this._domain,this._urlTemplate="https://YYYY/models/XXXX/embed",this._url=this._urlTemplate.replace("YYYY",this._domain),this._transmitOptions={},this._getURLOptions()};e.prototype={_urlOptionsDict:{skfb_api_version:{default:"1.12.1",type:"string"}},_optionsLoaded:function(t){this._urlOptions=t,this._version=this._getURLOption("skfb_api_version",this._version)},_getURLOption:function(t,e){var i=this._urlOptionsDict[t];if(!i)return e;null==e&&(e=i.default);t=this._urlOptions[t];return t&&t.length?t[0]:e},_getURLOptions:function(){if(!window||!window.location.search)return this._optionsLoaded({});var t,e,i,n,s="object"===o(t=window.location.search)?(e=t,i={},Object.keys(e).forEach(function(t){i[t]=Array.isArray(e[t])?e[t]:[e[t]]}),i):("?"===t[0]&&(t=t.substr(1)),t.split(r).reduce(function(t,e){if(0===e.length)return t;var i=e.indexOf("=");-1===i&&(i=e.length);var n=decodeURIComponent(e.substr(0,i).replace(/\+/g,"%20")),i=decodeURIComponent(e.substr(i+1).replace(/\+/g,"%20"));return void 0===t[n]&&(t[n]=[]),t[n].push(i),t},{}));for(n in s)n.startsWith("skfb_")&&(this._transmitOptions[n.substr(5)]=s[n]);return this._optionsLoaded(s)},getEmbedURL:function(t,e){var i=this._url+"?api_version="+this._version+"&api_id="+this._apiId+"&ui_infos=0&ui_stop=0&ui_inspector=0&ui_hint=0&ui_ar=0&ui_help=0&ui_settings=0&ui_vr=0&ui_fullscreen=0&ui_animations=0&ui_watermark_link=0&ui_watermark=0";e&&Object.keys(e).forEach(function(t){null!=e[t]&&"function"!=typeof e[t]&&(i+="&"+t.toString()+"="+e[t].toString())});var n=this._transmitOptions;return Object.keys(this._transmitOptions).forEach(function(t){i+="&"+t.toString()+"="+n[t].toString()}),i.replace("XXXX",t)},init:function(t,e){this._options=e,this._uid=t,this._realInit()},_initializeAPIEmbed:function(t){if(t.data&&t.data.instanceId&&this._apiId===t.data.instanceId&&"api.ready"===t.data.type&&this._target.src){if(void 0!==t.data.error)return this.error(t.data.error),void window.removeEventListener("message",this._initializeAPIEmbedBinded);t="https://"+(t=this._target.src.split("/"))[2];this._client&&(console.log("reusing a Sketchfab instance for multiple client is not supported, please create a new sketchfab instance"),window.removeEventListener("message",this._client._serverReceiveMessageBinded)),this._client=new window.SketchfabAPIClient(this._target.contentWindow,this._apiId,t),this._client.use(this._version,function(t,e){if(t)throw t;this.success.call(this,e)}.bind(this)),window.removeEventListener("message",this._initializeAPIEmbedBinded)}},_realInit:function(){this._initializeAPIEmbedBinded||(this._initializeAPIEmbedBinded=this._initializeAPIEmbed.bind(this)),window.addEventListener("message",this._initializeAPIEmbedBinded),this._target.src=this.getEmbedURL(this._uid,this._options)},success:function(t){this._options.success&&"function"==typeof this._options.success&&this._options.success(t)},error:function(t){this._options.error&&"function"==typeof this._options.error&&this._options.error(t)},show:function(){var t=this._target.style.top;this._target.style.top="-1000vh",Promise.resolve().then(function(){this._target.style.top=t}.bind(this))}};const i=e;return t.default})());
